# Инструкция по деплою SAMGA на Vercel

Данный документ содержит инструкции по деплою веб-приложения SAMGA на платформу Vercel, а также информацию об устранении распространенных ошибок при сборке.

## Подготовка к деплою

### 1. Установка зависимостей

Убедитесь, что у вас установлены все необходимые зависимости:

```bash
npm install
```

### 2. Исправление ошибок TypeScript и ESLint

Проект содержит скрипт для автоматического исправления большинства ошибок TypeScript:

```bash
npm run fix:ts
```

Для исправления ошибок ESLint запустите:

```bash
npm run lint:fix
```

### 3. Тестовая сборка

Проверьте успешность сборки локально:

```bash
npm run build:static
```

## Деплой на Vercel

### Автоматический деплой

Для автоматического деплоя на Vercel используйте команду:

```bash
npm run deploy:vercel
```

Данная команда выполнит следующие действия:
1. Установит Vercel CLI если необходимо
2. Исправит типичные ошибки TypeScript
3. Создаст .vercelignore если он отсутствует
4. Запустит деплой на Vercel с производственными настройками

### Ручной деплой

Если вы предпочитаете ручной деплой:

1. Установите Vercel CLI:
```bash
npm install -g vercel
```

2. Запустите деплой:
```bash
vercel --prod
```

## Устранение ошибок сборки

### Типичные ошибки TypeScript

Если вы столкнулись с ошибками TypeScript при сборке:

1. **no-floating-promises**: Добавьте `void` или `await` перед вызовом функций, которые возвращают промисы
2. **no-unsafe-assignment/member-access**: Используйте корректное приведение типов вместо `as any`
3. **prefer-nullish-coalescing**: Замените `||` на `??` для проверки на null/undefined
4. **no-unused-vars**: Удалите неиспользуемые переменные или добавьте префикс `_`

### Отключение строгих проверок при сборке

В файле `next.config.mjs` настроены параметры, отключающие строгие проверки типов и ESLint при сборке:

```javascript
export default {
  typescript: {
    ignoreBuildErrors: true,
  },
  eslint: {
    ignoreDuringBuilds: true,
  },
  output: 'export',
  // остальные настройки...
};
```

## Работа с мобильными приложениями

При деплое на Vercel, файлы, связанные с мобильными приложениями (Android/iOS), исключаются из сборки с помощью `.vercelignore`.

Документацию по сборке мобильных приложений смотрите в файле `MOBILE_APP_README.md`. 